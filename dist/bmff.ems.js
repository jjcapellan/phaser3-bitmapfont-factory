var t=0;function e(e){return"__private_"+t+++"_"+e}function r(t,e){if(!Object.prototype.hasOwnProperty.call(t,e))throw new TypeError("attempted to use private field on non-instance");return t}var n,i,a,o,s=[" A"," T"," Y","11","A ","AT","AV","AW","AY","Av","Aw","Ay","F,","F.","FA","L ","LT","LV","LW","LY","Ly","P ","P,","P.","PA","RT","RV","RW","RY","T ","T,","T-","T.","T:","T;","TA","TO","Ta","Tc","Te","Ti","To","Tr","Ts","Tu","Tw","Ty","V,","V-","V.","V:","V;","VA","Va","Ve","Vi","Vo","Vr","Vu","Vy","W,","W-","W.","W:","W;","WA","Wa","We","Wi","Wo","Wr","Wu","Wy","Y ","Y,","Y-","Y.","Y:","Y;","YA","Ya","Ye","Yi","Yo","Yp","Yq","Yu","Yv","ff","r,","r.","v,","v.","w,","w.","y,","y."],h=["Arial","Calibri","Helvetica","Roboto","Trebuchet MS","Verdana"],u=["Garamond","Georgia","serif","Times","Times New Roman"],c=["Consolas","Courier","Courier New","monospace"],l="",f=(n=function(t){for(var e=["i","webkitI","msI","mozI","oI"],r=0;r<e.length;r++){var n=e[r]+"mageSmoothingEnabled";if(n in t)return n}return null},[]),d=!1,g=(o=function(){var t=0;return f.forEach(function(e){e.parent&&t++}),t},{create2D:function(t,e,r){return i(t,e,r,1)},create:i=function(t,e,r,i,o){var s;void 0===e&&(e=1),void 0===r&&(r=1),void 0===i&&(i=1),void 0===o&&(o=!1);var h,u=a(i);return null===u?(u={parent:t,canvas:document.createElement("canvas"),type:i},1===i&&f.push(u),s=u.canvas):(u.parent=t,s=u.canvas),o&&(u.parent=s),s.width=e,s.height=r,d&&1===i&&(h=s.getContext("2d"),""===l&&(l=n(h)),l&&(h[l]=!1)),s},createWebGL:function(t,e,r){return i(t,e,r,2)},disableSmoothing:function(){d=!0},enableSmoothing:function(){d=!1},first:a=function(t){if(void 0===t&&(t=1),2===t)return null;for(var e=0;e<f.length;e++){var r=f[e];if(!r.parent&&r.type===t)return r}return null},free:function(){return f.length-o()},pool:f,remove:function(t){var e=t instanceof HTMLCanvasElement;f.forEach(function(r){(e&&r.canvas===t||!e&&r.parent===t)&&(r.parent=null,r.canvas.width=1,r.canvas.height=1)})},total:o});function v(t,e,r){var n=r?t[e]:Object.getOwnPropertyDescriptor(t,e);return!r&&n.value&&"object"==typeof n.value&&(n=n.value),!(!n||!function(t){return!!t.get&&"function"==typeof t.get||!!t.set&&"function"==typeof t.set}(n))&&(void 0===n.enumerable&&(n.enumerable=!0),void 0===n.configurable&&(n.configurable=!0),n)}function p(t,e){var r=Object.getOwnPropertyDescriptor(t,e);return!!r&&(r.value&&"object"==typeof r.value&&(r=r.value),!1===r.configurable)}function b(t,e,r,n){for(var i in e)if(e.hasOwnProperty(i)){var a=v(e,i,r);if(!1!==a){if(p((n||t).prototype,i)){if(m.ignoreFinals)continue;throw new Error("cannot override final property '"+i+"', set Class.ignoreFinals = true to skip")}Object.defineProperty(t.prototype,i,a)}else t.prototype[i]=e[i]}}function y(t,e){if(e){Array.isArray(e)||(e=[e]);for(var r=0;r<e.length;r++)b(t,e[r].prototype||e[r])}}function m(t){var e,r;if(t||(t={}),t.initialize){if("function"!=typeof t.initialize)throw new Error("initialize must be a function");e=t.initialize,delete t.initialize}else if(t.Extends){var n=t.Extends;e=function(){n.apply(this,arguments)}}else e=function(){};t.Extends?(e.prototype=Object.create(t.Extends.prototype),e.prototype.constructor=e,r=t.Extends,delete t.Extends):e.prototype.constructor=e;var i=null;return t.Mixins&&(i=t.Mixins,delete t.Mixins),y(e,i),b(e,t,!0,r),e}m.extend=b,m.mixin=y,m.ignoreFinals=!1;var w=function(t,e,r){return t<<16|e<<8|r};function x(t,e,r,n){var i=(t+6*e)%6,a=Math.min(i,4-i,1);return Math.round(255*(n-n*r*Math.max(0,a)))}var M=function(t,e,r,n){void 0===e&&(e=1),void 0===r&&(r=1);var i=x(5,t,e,r),a=x(3,t,e,r),o=x(1,t,e,r);return n?n.setTo?n.setTo(i,a,o,n.alpha,!1):(n.r=i,n.g=a,n.b=o,n.color=w(i,a,o),n):{r:i,g:a,b:o,color:w(i,a,o)}},P=function(t,e,r,n){void 0===n&&(n={h:0,s:0,v:0}),t/=255,e/=255,r/=255;var i=Math.min(t,e,r),a=Math.max(t,e,r),o=a-i,s=0,h=0===a?0:o/a,u=a;return a!==i&&(a===t?s=(e-r)/o+(e<r?6:0):a===e?s=(r-t)/o+2:a===r&&(s=(t-e)/o+4),s/=6),n.hasOwnProperty("_h")?(n._h=s,n._s=h,n._v=u):(n.h=s,n.s=h,n.v=u),n},T=new m({initialize:function(t,e,r,n){void 0===t&&(t=0),void 0===e&&(e=0),void 0===r&&(r=0),void 0===n&&(n=255),this.r=0,this.g=0,this.b=0,this.a=255,this._h=0,this._s=0,this._v=0,this._locked=!1,this.gl=[0,0,0,1],this._color=0,this._color32=0,this._rgba="",this.setTo(t,e,r,n)},transparent:function(){return this._locked=!0,this.red=0,this.green=0,this.blue=0,this.alpha=0,this._locked=!1,this.update(!0)},setTo:function(t,e,r,n,i){return void 0===n&&(n=255),void 0===i&&(i=!0),this._locked=!0,this.red=t,this.green=e,this.blue=r,this.alpha=n,this._locked=!1,this.update(i)},setGLTo:function(t,e,r,n){return void 0===n&&(n=1),this._locked=!0,this.redGL=t,this.greenGL=e,this.blueGL=r,this.alphaGL=n,this._locked=!1,this.update(!0)},setFromRGB:function(t){return this._locked=!0,this.red=t.r,this.green=t.g,this.blue=t.b,t.hasOwnProperty("a")&&(this.alpha=t.a),this._locked=!1,this.update(!0)},setFromHSV:function(t,e,r){return M(t,e,r,this)},update:function(t){if(void 0===t&&(t=!1),this._locked)return this;var e=this.r,r=this.g,n=this.b,i=this.a;return this._color=w(e,r,n),this._color32=i<<24|e<<16|r<<8|n,this._rgba="rgba("+e+","+r+","+n+","+i/255+")",t&&P(e,r,n,this),this},updateHSV:function(){return P(this.r,this.g,this.b,this),this},clone:function(){return new T(this.r,this.g,this.b,this.a)},gray:function(t){return this.setTo(t,t,t)},random:function(t,e){void 0===t&&(t=0),void 0===e&&(e=255);var r=Math.floor(t+Math.random()*(e-t)),n=Math.floor(t+Math.random()*(e-t)),i=Math.floor(t+Math.random()*(e-t));return this.setTo(r,n,i)},randomGray:function(t,e){void 0===t&&(t=0),void 0===e&&(e=255);var r=Math.floor(t+Math.random()*(e-t));return this.setTo(r,r,r)},saturate:function(t){return this.s+=t/100,this},desaturate:function(t){return this.s-=t/100,this},lighten:function(t){return this.v+=t/100,this},darken:function(t){return this.v-=t/100,this},brighten:function(t){var e=this.r,r=this.g,n=this.b;return e=Math.max(0,Math.min(255,e-Math.round(-t/100*255))),r=Math.max(0,Math.min(255,r-Math.round(-t/100*255))),n=Math.max(0,Math.min(255,n-Math.round(-t/100*255))),this.setTo(e,r,n)},color:{get:function(){return this._color}},color32:{get:function(){return this._color32}},rgba:{get:function(){return this._rgba}},redGL:{get:function(){return this.gl[0]},set:function(t){this.gl[0]=Math.min(Math.abs(t),1),this.r=Math.floor(255*this.gl[0]),this.update(!0)}},greenGL:{get:function(){return this.gl[1]},set:function(t){this.gl[1]=Math.min(Math.abs(t),1),this.g=Math.floor(255*this.gl[1]),this.update(!0)}},blueGL:{get:function(){return this.gl[2]},set:function(t){this.gl[2]=Math.min(Math.abs(t),1),this.b=Math.floor(255*this.gl[2]),this.update(!0)}},alphaGL:{get:function(){return this.gl[3]},set:function(t){this.gl[3]=Math.min(Math.abs(t),1),this.a=Math.floor(255*this.gl[3]),this.update()}},red:{get:function(){return this.r},set:function(t){t=Math.floor(Math.abs(t)),this.r=Math.min(t,255),this.gl[0]=t/255,this.update(!0)}},green:{get:function(){return this.g},set:function(t){t=Math.floor(Math.abs(t)),this.g=Math.min(t,255),this.gl[1]=t/255,this.update(!0)}},blue:{get:function(){return this.b},set:function(t){t=Math.floor(Math.abs(t)),this.b=Math.min(t,255),this.gl[2]=t/255,this.update(!0)}},alpha:{get:function(){return this.a},set:function(t){t=Math.floor(Math.abs(t)),this.a=Math.min(t,255),this.gl[3]=t/255,this.update()}},h:{get:function(){return this._h},set:function(t){this._h=t,M(t,this._s,this._v,this)}},s:{get:function(){return this._s},set:function(t){this._s=t,M(this._h,t,this._v,this)}},v:{get:function(){return this._v},set:function(t){this._v=t,M(this._h,this._s,t,this)}}}),k=T,O=function(t,e,r){var n=typeof t;return t&&"number"!==n&&"string"!==n&&t.hasOwnProperty(e)&&void 0!==t[e]?t[e]:r};function _(t,e){return parseInt(t.getAttribute(e),10)}var j=function(t,e,r,n,i){void 0===r&&(r=0),void 0===n&&(n=0);var a=e.cutX,o=e.cutY,s=e.source.width,h=e.source.height,u=e.sourceIndex,c={},l=t.getElementsByTagName("info")[0],f=t.getElementsByTagName("common")[0];c.font=l.getAttribute("face"),c.size=_(l,"size"),c.lineHeight=_(f,"lineHeight")+n,c.chars={};var d=t.getElementsByTagName("char"),g=void 0!==e&&e.trimmed;if(g)var v=e.height,p=e.width;for(var b=0;b<d.length;b++){var y=d[b],m=_(y,"id"),w=String.fromCharCode(m),x=_(y,"x"),M=_(y,"y"),P=_(y,"width"),T=_(y,"height");g&&(x<p&&(p=x),M<v&&(v=M)),g&&0!==v&&0!==p&&(x-=e.x,M-=e.y);var k=(a+x)/s,O=(o+M)/h,j=(a+x+P)/s,A=(o+M+T)/h;if(c.chars[m]={x:x,y:M,width:P,height:T,centerX:Math.floor(P/2),centerY:Math.floor(T/2),xOffset:_(y,"xoffset"),yOffset:_(y,"yoffset"),xAdvance:_(y,"xadvance")+r,data:{},kerning:{},u0:k,v0:O,u1:j,v1:A},i&&0!==P&&0!==T){var L=i.add(w,u,x,M,P,T);L&&L.setUVs(P,T,k,O,j,A)}}var W=t.getElementsByTagName("kerning");for(b=0;b<W.length;b++){var F=W[b],V=_(F,"first"),Y=_(F,"second"),G=_(F,"amount");c.chars[Y].kerning[V]=G}return c},A=/*#__PURE__*/e("currentPendingSteps"),L=/*#__PURE__*/e("currentTexture"),W=/*#__PURE__*/e("currentXMLs"),F=/*#__PURE__*/e("onComplete"),V=/*#__PURE__*/e("tasks"),Y=/*#__PURE__*/e("textureWidth"),G=/*#__PURE__*/e("textureHeight"),E=/*#__PURE__*/e("totalGlyphs"),S=/*#__PURE__*/e("totalHeight"),C=/*#__PURE__*/e("totalWidth"),z=/*#__PURE__*/e("calcBounds"),B=/*#__PURE__*/e("calcKernings"),I=/*#__PURE__*/e("finish"),H=/*#__PURE__*/e("getKerningPairs"),R=/*#__PURE__*/e("getTextureWidth"),N=/*#__PURE__*/e("getValidFont"),D=/*#__PURE__*/e("makeGlyphs"),K=/*#__PURE__*/e("makeTexture"),X=/*#__PURE__*/e("makeXMLs"),U=/*#__PURE__*/e("step"),q=/*#__PURE__*/function(){function t(t,e,n){var i=this,a=this,o=this;void 0===n&&(n={PoT:!1}),this.PoT=!1,this.scene=void 0,this.defaultFonts={sansSerif:h,serif:u,monospace:c},Object.defineProperty(this,A,{writable:!0,value:0}),Object.defineProperty(this,L,{writable:!0,value:null}),Object.defineProperty(this,W,{writable:!0,value:[]}),Object.defineProperty(this,F,{writable:!0,value:function(){}}),Object.defineProperty(this,V,{writable:!0,value:[]}),Object.defineProperty(this,Y,{writable:!0,value:0}),Object.defineProperty(this,G,{writable:!0,value:0}),Object.defineProperty(this,E,{writable:!0,value:0}),Object.defineProperty(this,S,{writable:!0,value:0}),Object.defineProperty(this,C,{writable:!0,value:0}),Object.defineProperty(this,z,{writable:!0,value:function(){var t,e=r(o,V)[V],n=0,i=0,a=0,s=0,h=0;t=r(o,R)[R](r(o,E)[E],r(o,S)[S],r(o,C)[C]);for(var u=0;u<e.length;u++){var c=e[u],l=c.glyphs,f=c.glyphsBounds,d=l[0].height;d>i&&(i=d);for(var g=0;g<l.length;g++){var v=l[g];(a+=v.width)>t&&(a=v.width,h+=i,i=d,s=0),f[g]={x:s,y:h,w:v.width,h:v.height},n=h+v.height,s+=v.width}}o.PoT&&(n=Phaser.Math.Pow2.GetNext(n)),r(o,Y)[Y]=t,r(o,G)[G]=n}}),Object.defineProperty(this,B,{writable:!0,value:function(){for(var t=r(o,V)[V],e=0;e<t.length;e++){var n=t[e];if(n.getKernings)for(var i=n.kernings,a=n.chars,s=n.glyphsBounds,h=r(o,H)[H](n),u=0;u<h.length;u++){var c=h[u].split(""),l=s[a.indexOf(c[0])].w+s[a.indexOf(c[1])].w,f=o.scene.make.text({text:h[u],style:n.style},!1),d=f.width-l;0!=d&&i.push({first:h[u].charCodeAt(0),second:h[u].charCodeAt(1),amount:d}),f.destroy()}}}}),Object.defineProperty(this,I,{writable:!0,value:function(){for(var t=r(o,L)[L],e=r(o,W)[W],n=r(o,V)[V][0].key,i=0;i<e.length;i++){var a=e[i],s=o.scene.textures.getFrame(n),h=j(a,s,0,0,t);o.scene.cache.bitmapFont.add(r(o,V)[V][i].key,{data:h,texture:n,frame:null})}r(o,L)[L]=null,r(o,W)[W]=[],r(o,V)[V]=[],r(o,F)[F]()}}),Object.defineProperty(this,H,{writable:!0,value:function(t){for(var e=[],r=0;r<s.length;r++){var n=s[r].split("");-1!=t.chars.indexOf(n[0])&&-1!=t.chars.indexOf(n[1])&&e.push(s[r])}return e}}),Object.defineProperty(this,R,{writable:!0,value:function(t,e,r){var n=Math.ceil(Math.sqrt(r/t*(e/t)*t));return o.PoT&&(n=Phaser.Math.Pow2.GetNext(n)),n}}),Object.defineProperty(this,N,{writable:!0,value:function(t){for(var e="",r=0;r<t.length;r++)if(o.check(t[r])){e=t[r];break}return e}}),Object.defineProperty(this,D,{writable:!0,value:function(){for(var t=r(o,V)[V],e=0;e<t.length;e++){var n=t[e],i=n.chars,a=i.length;r(o,E)[E]+=a;for(var s=0;s<a;s++){var h=o.scene.make.text({text:i[s],style:n.style},!1);n.glyphs.push(h),r(o,S)[S]+=h.height,r(o,C)[C]+=h.width}}}}),Object.defineProperty(this,K,{writable:!0,value:function(){try{return Promise.resolve(function(t,e,r,n){try{var i=e[0].key,a=t.make.renderTexture({x:0,y:0,width:r,height:n},!1);a.setOrigin(0);for(var o=0;o<e.length;o++)for(var s=e[o],h=s.glyphs,u=s.glyphsBounds,c=0;c<h.length;c++){var l=u[c];a.draw(h[c],l.x,l.y)}return Promise.resolve(new Promise(function(e){!function(t,e,r){t.renderTarget?function(t,e,r){var n=e.currentFramebuffer,i=e.snapshotState;i.bufferHeight=t.height,i.bufferWidth=t.width,i.callback=r,i.encoderOptions=1,i.getPixel=!1,i.height=t.height,i.isFramebuffer=!0,i.type="image/png",i.width=t.width,i.x=0,i.y=0,e.setFramebuffer(t.renderTarget.framebuffer),Phaser.Renderer.Snapshot.WebGL(e.canvas,i),e.setFramebuffer(n),i.callback=null,i.isFramebuffer=!1}(t,e,r):function(t,e,r){var n=e.snapshotState;n.callback=r,n.encoder=1,n.getPixel=!1,n.height=t.height,n.type="image/png",n.width=t.width,n.x=0,n.y=0,function(t,e){var r=O(e,"callback"),n=O(e,"type","image/png"),i=O(e,"encoder",.92),a=Math.abs(Math.round(O(e,"x",0))),o=Math.abs(Math.round(O(e,"y",0))),s=O(e,"width",t.width),h=O(e,"height",t.height);if(O(e,"getPixel",!1)){var u=t.getContext("2d").getImageData(a,o,1,1).data;r.call(null,new k(u[0],u[1],u[2],u[3]/255))}else if(0!==a||0!==o||s!==t.width||h!==t.height){var c=g.createWebGL(this,s,h);c.getContext("2d").drawImage(t,a,o,s,h,0,0,s,h);var l=new Image;l.onerror=function(){r.call(null),g.remove(c)},l.onload=function(){r.call(null,l),g.remove(c)},l.src=c.toDataURL(n,i)}else{var f=new Image;f.onerror=function(){r.call(null)},f.onload=function(){r.call(null,f)},f.src=t.toDataURL(n,i)}}(t.canvas,n),n.callback=null}(t,e,r)}(a,t.renderer,function(r){t.textures.addImage(i,r);var n=t.textures.get(i);a.destroy(),e(n)})}))}catch(t){return Promise.reject(t)}}(i.scene,r(i,V)[V],r(i,Y)[Y],r(i,G)[G])).then(function(t){r(i,L)[L]=t,r(i,U)[U](null)})}catch(t){return Promise.reject(t)}}}),Object.defineProperty(this,X,{writable:!0,value:function(){try{return r(a,W)[W]=function(t){for(var e=[],r=0;r<t.length;r++){for(var n=t[r],i=n.chars,a=n.chars.length,o=n.fontFamily,s=n.style.fontSize.replace("px",""),h=n.glyphsBounds,u='<?xml version="1.0"?><font><info face="'+o+'" size="'+s+'"></info><common lineHeight="'+s+'"></common><chars count="'+a+'">',c="",l=0;l<a;l++){var f=i[l].charCodeAt(0),d=h[l];c+='<char id="'+f+'" x="'+d.x+'" y="'+d.y+'" width="'+d.w+'" height="'+d.h+'" xoffset="0" yoffset="0" xadvance="'+d.w+'"/>'}c+="</chars>";var g="";if(n.getKernings){var v=n.kernings.length,p=n.kernings;g+='<kernings count="'+v+'">';for(var b=0;b<v;b++){var y=p[b];g+='<kerning first="'+y.first+'" second="'+y.second+'" amount="'+y.amount+'" />'}g+="</kernings>"}var m=u+c+g+"</font>",w=(new DOMParser).parseFromString(m,"application/xml");e.push(w)}return e}(r(a,V)[V]),r(a,U)[U](null),Promise.resolve()}catch(t){return Promise.reject(t)}}}),Object.defineProperty(this,U,{writable:!0,value:function(t){r(o,A)[A]-=1,0==r(o,A)[A]&&r(o,I)[I]()}}),this.scene=t,this.PoT=n.PoT,r(this,F)[F]=e}var e=t.prototype;return e.check=function(t){return document.fonts.check("12px "+t)},e.exec=function(){r(this,E)[E]=0,r(this,S)[S]=0,r(this,C)[C]=0,r(this,D)[D](),r(this,z)[z](),r(this,B)[B](),r(this,A)[A]=2,r(this,K)[K](),r(this,X)[X]()},e.make=function(t,e,n,i,a){void 0===i&&(i={}),null==i.fontSize&&(i.fontSize="32px");var o={chars:n,fontFamily:"string"==typeof e?e:r(this,N)[N](e),glyphs:[],glyphsBounds:[],getKernings:a,kernings:[],key:t,style:i};o.style.fontFamily=o.fontFamily,r(this,V)[V].push(o)},t}();export{q as default};
